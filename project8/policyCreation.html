<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оформление полиса</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="style/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Forum&family=Manrope:wght@200..800&display=swap"
        rel="stylesheet">
    <link rel="icon" href="images/appstore.svg" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

</head>

<body class="body-policy">
    <div class="wrapper">
        <header class="header">
            <div class="container">
                <div class="header__inner" data-aos="fade-up" data-aos-offset="100" data-aos-duration="1000"
                    data-aos-easing="ease-in-out" data-aos-once="true">

                    <a class="logo" href="index.html">
                        <img class="logo__img" src="images/logo.svg" alt="imgNotFound">
                    </a>
                    <nav class="menu">
                        <button class="menu__btn">
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>

                        <ul class="menu__list">
                            <button class="close__btn">
                                <span></span>
                                <span></span>
                            </button>
                            <!-- <li class="menu__list-item">
                                <a class="menu__list-link" href="new-cars.html">
                                    УСЛУГИ
                                </a>
                            </li> -->
                            <!-- <li class="menu__list-item">
                                <a class="menu__list-link" href="#">
                                    PRE-OWNED CARS
                                </a>
                            </li>
                            <li class="menu__list-item">
                                <a class="menu__list-link" href="#">
                                    FINANCE
                                </a>
                            </li> -->
                            <!-- <li class="menu__list-item">
                                <a class="menu__list-link" href="#">
                                    МОИ 
                                </a>
                            </li> -->
                            <li class="menu__list-item">
                                <a class="menu__list-link" href="about.html">
                                    О КОМПАНИИ
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <a class="auth-btn" id="auth-link" href="register.html">Регистрация/Вход</a>
                </div>
            </div>
        </header>
        <section class="policy">
            <div class="container">
                <div class="policy__inner">
                    <a class="logo reg-logo" href="index.html">
                        <svg width="116" height="33" viewBox="0 0 116 33" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M1.76 32C1.41333 32 1.12 31.8933 0.88 31.68C0.666667 31.44 0.56 31.1467 0.56 30.8V1.96C0.56 1.61333 0.666667 1.33333 0.88 1.12C1.12 0.879999 1.41333 0.759999 1.76 0.759999H21C21.32 0.759999 21.6 0.879999 21.84 1.12C22.08 1.33333 22.2 1.61333 22.2 1.96C22.2 2.28 22.08 2.56 21.84 2.8C21.6 3.04 21.32 3.16 21 3.16H2.96V15.16H16.2C16.5467 15.16 16.8267 15.28 17.04 15.52C17.28 15.7333 17.4 16.0133 17.4 16.36C17.4 16.7067 17.28 17 17.04 17.24C16.8267 17.48 16.5467 17.6 16.2 17.6H2.96V30.8C2.96 31.1467 2.84 31.44 2.6 31.68C2.38667 31.8933 2.10667 32 1.76 32ZM37.6 32.24C35.4667 32.24 33.5467 31.76 31.84 30.8C30.16 29.8133 28.8267 28.48 27.84 26.8C26.88 25.0933 26.4 23.1867 26.4 21.08C26.4 18.9467 26.88 17.04 27.84 15.36C28.8267 13.6533 30.16 12.32 31.84 11.36C33.5467 10.3733 35.4667 9.88 37.6 9.88C39.7333 9.88 41.64 10.3733 43.32 11.36C45 12.32 46.32 13.6533 47.28 15.36C48.2667 17.04 48.76 18.9467 48.76 21.08C48.76 23.1867 48.2667 25.0933 47.28 26.8C46.32 28.48 45 29.8133 43.32 30.8C41.64 31.76 39.7333 32.24 37.6 32.24ZM37.6 30C39.28 30 40.7733 29.6133 42.08 28.84C43.4133 28.04 44.4533 26.9733 45.2 25.64C45.9733 24.28 46.36 22.7467 46.36 21.04C46.36 19.36 45.9733 17.8533 45.2 16.52C44.4533 15.16 43.4133 14.0933 42.08 13.32C40.7733 12.52 39.28 12.12 37.6 12.12C35.9467 12.12 34.4533 12.52 33.12 13.32C31.7867 14.0933 30.7333 15.16 29.96 16.52C29.1867 17.8533 28.8 19.3733 28.8 21.08C28.8 22.76 29.1867 24.28 29.96 25.64C30.7333 26.9733 31.7867 28.04 33.12 28.84C34.4533 29.6133 35.9467 30 37.6 30ZM55.5484 18.64C55.7084 16.9333 56.1751 15.4267 56.9484 14.12C57.7218 12.7867 58.7218 11.7467 59.9484 11C61.1751 10.2533 62.5351 9.88 64.0284 9.88C65.0418 9.88 65.8284 10 66.3884 10.24C66.9484 10.48 67.1618 10.9067 67.0284 11.52C66.9484 11.92 66.7618 12.16 66.4684 12.24C66.1751 12.32 65.8151 12.3333 65.3884 12.28C64.9884 12.2 64.5351 12.16 64.0284 12.16C62.6951 12.16 61.5084 12.44 60.4684 13C59.4284 13.56 58.6151 14.3333 58.0284 15.32C57.4418 16.28 57.1484 17.3867 57.1484 18.64H55.5484ZM55.9484 32C55.6018 32 55.3084 31.8933 55.0684 31.68C54.8551 31.44 54.7484 31.1467 54.7484 30.8V11.32C54.7484 10.9467 54.8551 10.6533 55.0684 10.44C55.3084 10.2267 55.6018 10.12 55.9484 10.12C56.3218 10.12 56.6151 10.2267 56.8284 10.44C57.0418 10.6533 57.1484 10.9467 57.1484 11.32V30.8C57.1484 31.1467 57.0418 31.44 56.8284 31.68C56.6151 31.8933 56.3218 32 55.9484 32ZM81.2475 32C79.7808 31.9733 78.4742 31.64 77.3275 31C76.1808 30.3333 75.2875 29.4267 74.6475 28.28C74.0075 27.1067 73.6875 25.7867 73.6875 24.32V4.4C73.6875 4.02666 73.7942 3.73333 74.0075 3.52C74.2475 3.28 74.5408 3.16 74.8875 3.16C75.2608 3.16 75.5542 3.28 75.7675 3.52C76.0075 3.73333 76.1275 4.02666 76.1275 4.4V24.32C76.1275 25.8667 76.6075 27.1333 77.5675 28.12C78.5275 29.08 79.7675 29.56 81.2875 29.56H82.1675C82.5408 29.56 82.8342 29.68 83.0475 29.92C83.2875 30.1333 83.4075 30.4267 83.4075 30.8C83.4075 31.1467 83.2875 31.44 83.0475 31.68C82.8342 31.8933 82.5408 32 82.1675 32H81.2475ZM70.5675 13.08C70.2475 13.08 69.9808 12.9867 69.7675 12.8C69.5808 12.5867 69.4875 12.32 69.4875 12C69.4875 11.68 69.5808 11.4267 69.7675 11.24C69.9808 11.0267 70.2475 10.92 70.5675 10.92H81.4075C81.7275 10.92 81.9808 11.0267 82.1675 11.24C82.3808 11.4267 82.4875 11.68 82.4875 12C82.4875 12.32 82.3808 12.5867 82.1675 12.8C81.9808 12.9867 81.7275 13.08 81.4075 13.08H70.5675ZM90.4203 32C90.0736 32 89.7803 31.8933 89.5403 31.68C89.327 31.44 89.2203 31.1467 89.2203 30.8V11.32C89.2203 10.9467 89.327 10.6533 89.5403 10.44C89.7803 10.2267 90.0736 10.12 90.4203 10.12C90.7936 10.12 91.087 10.2267 91.3003 10.44C91.5136 10.6533 91.6203 10.9467 91.6203 11.32V30.8C91.6203 31.1467 91.5136 31.44 91.3003 31.68C91.087 31.8933 90.7936 32 90.4203 32ZM90.3803 5.52C89.8736 5.52 89.4336 5.34666 89.0603 5C88.7136 4.62667 88.5403 4.17333 88.5403 3.64C88.5403 3.02666 88.727 2.57333 89.1003 2.28C89.5003 1.96 89.9403 1.8 90.4203 1.8C90.8736 1.8 91.287 1.96 91.6603 2.28C92.0603 2.57333 92.2603 3.02666 92.2603 3.64C92.2603 4.17333 92.0736 4.62667 91.7003 5C91.3536 5.34666 90.9136 5.52 90.3803 5.52ZM107.071 32.24C105.685 32.24 104.231 31.9867 102.711 31.48C101.191 30.9733 99.9246 30.12 98.9113 28.92C98.6979 28.6533 98.6046 28.3733 98.6313 28.08C98.6846 27.76 98.8579 27.4933 99.1513 27.28C99.4179 27.0933 99.6979 27.0267 99.9913 27.08C100.311 27.1333 100.565 27.28 100.751 27.52C101.525 28.4267 102.458 29.0667 103.551 29.44C104.671 29.7867 105.885 29.96 107.191 29.96C109.431 29.96 111.018 29.56 111.951 28.76C112.885 27.96 113.351 27.0267 113.351 25.96C113.351 24.92 112.845 24.0667 111.831 23.4C110.845 22.7067 109.311 22.2133 107.231 21.92C104.565 21.5467 102.591 20.8267 101.311 19.76C100.031 18.6933 99.3913 17.4533 99.3913 16.04C99.3913 14.7067 99.7246 13.5867 100.391 12.68C101.058 11.7467 101.965 11.0533 103.111 10.6C104.285 10.12 105.618 9.88 107.111 9.88C108.925 9.88 110.458 10.2133 111.711 10.88C112.965 11.52 113.978 12.3867 114.751 13.48C114.965 13.7467 115.031 14.04 114.951 14.36C114.898 14.6533 114.698 14.8933 114.351 15.08C114.085 15.2133 113.805 15.2533 113.511 15.2C113.218 15.1467 112.965 14.9867 112.751 14.72C112.085 13.8667 111.271 13.2267 110.311 12.8C109.378 12.3467 108.285 12.12 107.031 12.12C105.351 12.12 104.045 12.48 103.111 13.2C102.178 13.92 101.711 14.7867 101.711 15.8C101.711 16.4933 101.898 17.1067 102.271 17.64C102.671 18.1467 103.311 18.5867 104.191 18.96C105.071 19.3067 106.245 19.5867 107.711 19.8C109.711 20.0667 111.285 20.52 112.431 21.16C113.605 21.8 114.431 22.5467 114.911 23.4C115.418 24.2267 115.671 25.12 115.671 26.08C115.671 27.3333 115.271 28.4267 114.471 29.36C113.671 30.2933 112.618 31.0133 111.311 31.52C110.005 32 108.591 32.24 107.071 32.24Z"
                                fill="white" />
                        </svg>
                    </a>
                    <!-- <div class="auth-toggle">
                        <button id="show-register">Оформление полиса</button>
                        <button id="show-login">Вход</button> -->
                    <!-- </div> -->
                    <h1 class="auth-title">Оформление полиса</h1>
                    <form id="process-policy-form" class="auth-form active">
                        <div class="form__inner">
                            <label>
                                <input class="user-input" type="text" id="first-name" autocomplete="name" placeholder="Имя" readonly>
                                <div id="firstname-error" class="error-message"></div>
                            </label>
                            
                            <label>
                                <input class="user-input" type="text" id="last-name" autocomplete="name" placeholder="Фамилия" readonly>
                                <div id="lastname-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <input class="user-input" type="text" id="birthdate" autocomplete="bday" placeholder="Дата рождения" readonly>
                                <div id="birthdate-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <input class="user-input" type="text" id="email" name="email" autocomplete="email" placeholder="E-mail" readonly>
                                <div id="email-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <input class="user-input" type="tel" id="phone" name="phone" autocomplete="tel" placeholder="Номер телефона" maxlength="18" oninput="formatPhoneNumber(event)" readonly>
                                <div id="phone-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <input class="user-input" type="text" id="address" placeholder="Адрес проживания" readonly>
                                <div id="address-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <select id="policy-type" class="user-input" required inert>
                                    <option value="">Выберите тип полиса</option>
                                    <option value="ОСАГО">ОСАГО</option>
                                    <option value="КАСКО">КАСКО</option>
                                    <option value="Жизни">Страхование жизни</option>
                                    <option value="Здоровья">Страхование здоровья</option>
                                    <option value="Путешествия">Путешествия</option>
                                    <option value="Имущественное страхование">Имущественное страхование</option>
                                </select>
                                <input type="hidden" id="coverage" name="coverage" value="">
                                <div id="coverage-info"></div>
                                <div id="policy-type-error" class="error-message"></div>
                            </label>
                    
                            <label>
                                <input class="user-input" type="date" id="policy-start-date" placeholder="Выберите дату начала полиса" required>
                                <div id="policy-start-date-error" class="error-message"></div>
                            </label>
                    
                            <label for="insurance-amount">
                                <select class="user-input" id="insurance-amount" required>
                                    <option value="">Выберите страховую сумму</option>
                                    <option value="100000">10000,00 RUB</option>
                                    <option value="200000">20000,00 RUB</option>
                                    <option value="500000">50000,00 RUB</option>
                                    <option value="1000000">1000000,00 RUB</option>
                                </select>
                                <div id="insurance-amount-error" class="error-message"></div>
                            </label>

                            <label class="confirm-terms confirm-terms-policy">
                                <input type="checkbox" id="agree-terms" required>
                                <span class="form__checkbox policy-form-checkbox"></span>
                                <p>Я согласен на обработку моих персональных данных в соответствии с <a href="privacyPolicy.html" target="_blank">Политикой конфиденциальности</a>.</p>
                                <div id="agree-terms-error" class="error-message"></div>
                            </label>
                    
                            <button class="top__link reg-link policy-form-btn" type="submit">Отправить</button>
                        </div>
                    </form>
          
                    <form class="auth-form hidden" id="check-code-form">
                        <label>
                            <input type="text" id="check-code" placeholder="Код из сообщения">
                        </label>
                        <button class="top__link code-link">Подтвердить</button>
                    </form>
                    <div class="hidden" id="success-notify">
                        <img class="success__notify-img" src="images/success.png" alt="">
                        <div class="success-notify-message">Ваша заявка принята на рассмотрение</div>
                    </div>
             

            
                </div>
            </div>

        </section>
        <h2 class="server-error-message" id="server-error"></h2>
    </div>




    <script src="script/transition.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="script/script.js"></script>
    <script src="script/policyCreation.js"></script>
    <script>
        AOS.init({
            disable: 'mobile',
            duration: 800,
            once: true,
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script defer src="script/register.js"></script>
    <script>
        $(document).ready(function () {
            $('#policy-type').select2({
                placeholder: 'Выберите тип полиса',
                allowClear: false, 
            });
        });

        $(document).ready(function () {
            $('#insurance-amount').select2({
                placeholder: 'Выберите страховую сумму',
                allowClear: false, 
            });
        });

        let today = new Date();
        let maxAdultDate = new Date(); 
        maxAdultDate.setFullYear(today.getFullYear() - 18);  
        let minAllowedDate = new Date();
        minAllowedDate.setFullYear(today.getFullYear() - 100); 

        let maxAdultFormatted = maxAdultDate.toISOString().split('T')[0];
        let minAllowedFormatted = minAllowedDate.toISOString().split('T')[0];

        let tomorrow = new Date();

        tomorrow.setDate(tomorrow.getDate() + 1);

        let tomorrowFormatted = tomorrow.toISOString().split('T')[0];

        flatpickr("#birthdate", {
            dateFormat: "Y-m-d",      
            placeholder: "Выберите дату рождения", 
            minDate: minAllowedFormatted,   
            maxDate: maxAdultFormatted,     
            disableMobile: true,      
            altInput: true,   
            altFormat: "j F, Y",
            allowInput: false, 
            locale: "ru", 
            mode: "single",
            clickOpens: false,  
            onChange: function(selectedDates, dateStr, instance) {
                console.log("Выбрана дата рождения:", dateStr);
            }
        });

        flatpickr("#policy-start-date", {
            dateFormat: "Y-m-d",
            placeholder: "Выберите дату начала полиса",
            minDate: tomorrowFormatted,
            maxDate: "2050-01-01",
            disableMobile: true,
            altInput: true,
            altFormat: "j F, Y",
            allowInput: true,
            locale: "ru",
            mode: "single",
            onChange: function(selectedDates, dateStr, instance) {
                console.log("Выбрана дата начала полиса:", dateStr);
            }
        });

    </script>
</body>

</html>